# I18N & I10N

This app can dynamic load json files for strings in the app. This is be done by wrapping [@solid-primitives/i18n](https://github.com/solidjs-community/solid-primitives/tree/main/packages/i18n#readme) in `src/common/i18n-wrapper`.

## Get a string per the UI language

It's same to [@solid-primitives/i18n](https://github.com/solidjs-community/solid-primitives/tree/main/packages/i18n#readme), the only difference: import the `useI18n` from `src/common/i18n-wrapper`.

You must name the `t` function as `t`, or it could not be detected by our automate tools.

## Editing

All string files are placed at `src/strings/` per language. The file names follow [RFC4646](https://www.rfc-editor.org/rfc/rfc4646). The supported languages are hard-coded in `src/common/i18n-wrapper.ts`.

### Change existing strings

Edit the file in `src/strings/`.

### Add/delete keys

Editing your code to refer or unrefer the keys, and update the scheme:

Run below command in the project root.

````sh
scripts/make_strings_scheme.py 'src/**' > src/scheme.json
````

Requires latest Python 3.

### Add a new language

Add the language tag to the `SUPPORTED_LANGS` in `src/common/i18n-wrapper.ts` (order doesn't matter, but please add the new tag to the end of array):

````ts
const SUPPORTED_LANGS = ["en", "zh-Hans"]; // Put the tag into this array
````

The tag should follow [RFC4646](https://www.rfc-editor.org/rfc/rfc4646).

Then, create a json file in `src/strings`, the name is the tag. For example, creating a file for German:

````sh
echo '{}' > de.json
````

or copying an existing file:

````sh
cp src/strings/en.json src/strings/de.json
````
